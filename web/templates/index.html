<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>指标看板 - Binance</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>📊 指标看板</h1>
            <div class="controls">
                <select id="symbol-selector" class="control-item">
                    <option value="BTCUSDT" selected>BTCUSDT</option>
                    <option value="ETHUSDT">ETHUSDT</option>
                    <option value="SOLUSDT">SOLUSDT</option>
                    <option value="BNBUSDT">BNBUSDT</option>
                </select>
                <select id="interval-selector" class="control-item">
                    <option value="3m">3分钟</option>
                    <option value="15m">15分钟</option>
                    <option value="1h" selected>1小时</option>
                    <option value="4h">4小时</option>
                    <option value="1d">1天</option>
                </select>
                <div class="status" id="status">🟢 连接中...</div>
            </div>
        </header>

        <!-- 统一的图表容器，所有看板共享一个时间轴 -->
        <div class="unified-chart-container">
            <div class="chart-controls">
                <div class="dashboard-header">
                    <h2>指标看板</h2>
                    <div class="config-buttons">
                        <button class="config-btn" onclick="showConfig('main')">⚙️ 主看板</button>
                        <button class="config-btn" onclick="showConfig('macd')">⚙️ MACD</button>
                        <button class="config-btn" onclick="showConfig('cci')">⚙️ CCI</button>
                        <button class="config-btn" onclick="showConfig('rsi')">⚙️ RSI</button>
                    </div>
                </div>
                
                <!-- 配置面板 -->
                <div id="main-config-panel" class="config-panel" style="display: none;">
                    <h3>主看板配置</h3>
                    <div class="config-grid">
                        <div class="config-item">
                            <label>布林线周期:</label>
                            <input type="number" id="boll-period" min="1" value="24">
                        </div>
                        <div class="config-item">
                            <label>布林线偏差:</label>
                            <input type="number" id="boll-deviation" min="0.1" step="0.1" value="2.0">
                        </div>
                        <div class="config-item">
                            <label>包络线周期:</label>
                            <input type="number" id="env-period" min="1" value="24">
                        </div>
                        <div class="config-item">
                            <label>包络线偏差(%):</label>
                            <input type="number" id="env-deviation" min="0.1" step="0.01" value="2.28">
                        </div>
                    </div>
                    <button class="apply-btn" onclick="applyConfig('main')">应用</button>
                </div>
                
                <div id="macd-config-panel" class="config-panel" style="display: none;">
                    <h3>MACD配置</h3>
                    <div class="config-grid">
                        <div class="config-group">
                            <h4>MACD1</h4>
                            <div class="config-item">
                                <label>快速周期:</label>
                                <input type="number" id="macd1-fast" min="1" value="48">
                            </div>
                            <div class="config-item">
                                <label>慢速周期:</label>
                                <input type="number" id="macd1-slow" min="1" value="72">
                            </div>
                            <div class="config-item">
                                <label>信号周期:</label>
                                <input type="number" id="macd1-signal" min="1" value="2">
                            </div>
                        </div>
                        <div class="config-group">
                            <h4>MACD2</h4>
                            <div class="config-item">
                                <label>快速周期:</label>
                                <input type="number" id="macd2-fast" min="1" value="72">
                            </div>
                            <div class="config-item">
                                <label>慢速周期:</label>
                                <input type="number" id="macd2-slow" min="1" value="168">
                            </div>
                            <div class="config-item">
                                <label>信号周期:</label>
                                <input type="number" id="macd2-signal" min="1" value="2">
                            </div>
                        </div>
                    </div>
                    <button class="apply-btn" onclick="applyConfig('macd')">应用</button>
                </div>
                
                <div id="cci-config-panel" class="config-panel" style="display: none;">
                    <h3>CCI配置</h3>
                    <div class="config-grid">
                        <div class="config-item">
                            <label>CCI周期1:</label>
                            <input type="number" id="cci-period1" min="1" value="48">
                        </div>
                        <div class="config-item">
                            <label>CCI周期2:</label>
                            <input type="number" id="cci-period2" min="1" value="72">
                        </div>
                        <div class="config-item">
                            <label>CCI周期3:</label>
                            <input type="number" id="cci-period3" min="1" value="168">
                        </div>
                    </div>
                    <button class="apply-btn" onclick="applyConfig('cci')">应用</button>
                </div>
                
                <div id="rsi-config-panel" class="config-panel" style="display: none;">
                    <h3>RSI配置</h3>
                    <div class="config-grid">
                        <div class="config-item">
                            <label>RSI周期1:</label>
                            <input type="number" id="rsi-period1" min="1" value="48">
                        </div>
                        <div class="config-item">
                            <label>RSI周期2:</label>
                            <input type="number" id="rsi-period2" min="1" value="72">
                        </div>
                    </div>
                    <button class="apply-btn" onclick="applyConfig('rsi')">应用</button>
                </div>
            </div>
            
            <!-- 统一的图表容器 -->
            <div id="unified-chart" class="unified-chart"></div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
